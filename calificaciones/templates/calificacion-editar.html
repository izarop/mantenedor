{% load static %}
<!DOCTYPE html><html lang="es"><head> 
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Modificar Calificación</title>
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head><body>

<header class="appbar">
  <div class="brand">NUAM · Mantenedor de Calificaciones Tributarias</div>
  <nav>
    <a href="{% url 'calificacion_list' %}">Listado</a>
    <a href="{% url 'calificacion_create' %}">Ingresar</a>
    <a href="{% url 'calificacion_list' %}">Factores/Calcular</a>
    <a href="{% url 'calificacion_list' %}">Carga x Factor</a>
    <a href="{% url 'calificacion_list' %}">Carga x Monto</a>
  </nav>
</header>

<div class="container">
  <div class="card">
    <div class="card-header">Modificar Calificación</div>
    <div class="card-body">
      <form class="grid" action="{% url 'calificacion_edit' enc.pk %}" method="post">
        {% csrf_token %}

        <div class="field" style="grid-column:span 3">
          <label>Mercado</label>
          <select name="mercado" required>
            {% for v, label in mercado_choices %}
              <option value="{{ v }}" {% if form.instance.mercado == v %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="field" style="grid-column:span 3">
          <label>Origen</label>
          <select name="origen">
            <option value="" {% if not form.instance.origen %}selected{% endif %}>(Opcional)</option>
            {% for v, label in origen_choices %}
              <option value="{{ v }}" {% if form.instance.origen == v %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="field" style="grid-column:span 4">
          <label>Instrumento</label>
          <input type="text" name="instrumento" value="{{ form.instance.instrumento }}">
        </div>

        <div class="field" style="grid-column:span 3">
          <label>evento_capital</label>
          <input type="text" name="evento_capital" value="{{ form.instance.evento_capital }}">
        </div>

        <div class="field" style="grid-column:span 2">
          <label>Valor histórico</label>
          <input type="number" name="valor_historico" value="{{ form.valor_historico.value|default:'' }}">
          {% for error in form.valor_historico.errors %}<div style="color: red; font-size: 0.8em;">{{ error }}</div>{% endfor %}
        </div>

        <!-- <div class="field" style="grid-column:span 2">
          <label>Valor histórico</label>
          <input type="number" step="0.00000001" name="valor_historico" value="{{ form.instance.valor_historico }}">
        </div> -->

        <div class="field" style="grid-column:span 3">
          <label>Fecha Pago</label>
          <input type="date" name="fecha_pago" value="{{ form.instance.fecha_pago|date:'Y-m-d' }}">
        </div>

        <div class="field" style="grid-column:span 3">
          <label>Secuencia Evento</label>
          <input type="number" min="0" name="secuencia_evento" value="{{ form.secuencia_evento.value  }}">
          <!-- <input type="number" min="0" name="secuencia_evento" value="{{ form.instance.secuencia_evento }}"> -->
        </div>

        <div class="field" style="grid-column:span 2">
          <label>Año</label>
          <input type="number" name="anio" value="{{ form.anio.value|default:'' }}">
          {% for error in form.anio.errors %}<div style="color: red; font-size: 0.8em;">{{ error }}</div>{% endfor %}
        </div>

        <!-- <div class="field" style="grid-column:span 2">
          <label>Año</label> -->
          <!-- <input type="number" name="anio" value="{{ form.instance.anio }}"> -->
          <!-- <input type="number" name="anio" value="{{ form.anio.value}}">
        </div> -->

        <div class="field" style="grid-column:span 2">
          <label>Factor de Actualización</label>
          <input type="number" name="factor_actualizacion" value="{{ form.factor_actualizacion.value|default:'' }}">
          {% for error in form.factor_actualizacion.errors %}<div style="color: red; font-size: 0.8em;">{{ error }}</div>{% endfor %}
        </div>

        <!-- <div class="field" style="grid-column:span 2">
          <label>Factor de Actualización</label>
          <input type="number" step="0.00000001" name="factor_actualizacion" value="{{ form.instance.factor_actualizacion }}">
        </div> -->

        <div class="field" style="grid-column:span 2">
          <label>SFUT</label>
          <select name="sfut">
            <option value="False" {% if not form.instance.sfut %}selected{% endif %}>No</option>
            <option value="True"  {% if form.instance.sfut %}selected{% endif %}>Sí</option>
          </select>
        </div>

        <div class="field" style="grid-column:span 12">
          <label>Descripción</label>
          <input type="text" name="descripcion" value="{{ form.instance.descripcion }}">
        </div>

        <div class="footer-actions" style="grid-column:span 12">
          <a class="btn btn-outline" href="{% url 'calificacion_list' %}">Cancelar</a>
          <button class="btn btn-primary" type="submit">Guardar</button>
        </div>
      </form>
    </div>
  </div>
</div>

</body></html>